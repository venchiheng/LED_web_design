<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fireworks</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background-color: black;
    }
    #canvas{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    z-index:-1;
}
</style>
</head>
<body>
<canvas id="canvas"></canvas>
<script>
var c = document.getElementById("canvas");
var ctx = c.getContext("2d");
var cwidth, cheight;
var shells = [];
var pass = [];

var colors = ['#ff5252', '#ff4081', '#e040fb', '#7c4dff', '#53dff', '#40cdff', '#18ffff', '#64ffda', '#69f0ae'];

function reset() {
    cwidth = window.innerWidth;
    cheight = window.innerHeight;
    c.width = cwidth;
    c.height = cheight;
}

window.onresize = function() {
    reset();
}

reset();

function newshell() {
    var left = (Math.random() > 0.5);
    var shell = {};
    shell.x = left ? 1 : 0;
    shell.y = 1;
    shell.xoff = (0.01 + Math.random() * 0.007) * (left ? 1 : -1);
    shell.yoff = 0.02 + Math.random() * 0.07;
    shell.size = Math.random() * 6 + 8;
    shell.color = colors[Math.floor(Math.random() * colors.length)];
    shells.push(shell);
}

function newpass(shell) {
    var pascount = Math.ceil(Math.pow(shell.size, 2) * Math.PI);
    for (var i = 0; i < pascount; i++) {
        var pas = {};
        pas.x = shell.x * cwidth;
        pas.y = shell.y * cheight;
        var a = Math.random() * 2 * Math.PI;
        var s = Math.random() * 70;
        pas.xoff = s * Math.cos(a);
        pas.yoff = s * Math.sin(a);
        pas.color = shell.color;
        pas.size = Math.sqrt(shell.size);
        if (pass.length < 1000) {
            pass.push(pas);
        }
    }
}

function step() {
    ctx.clearRect(0, 0, cwidth, cheight);

    if (shells.length < 10 && Math.random() > 0.96) {
        newshell();
    }

    for (var i = 0; i < shells.length; i++) {
        var shell = shells[i];
        ctx.beginPath();
        ctx.arc(shell.x * cwidth, shell.y * cheight, shell.size, 0, 2 * Math.PI);
        ctx.fillStyle = shell.color;
        ctx.fill();
        shell.x -= shell.xoff;
        shell.y -= shell.yoff;
        shell.xoff -= (shell.xoff * 0.01);
        shell.yoff -= ((shell.yoff + 0.2) * 0.01);
        if (shell.yoff < -0.005) {
            newpass(shell);
            shells.splice(i, 1);
            i--;
        }
    }

    for (var i = 0; i < pass.length; i++) {
        var pas = pass[i];
        ctx.beginPath();
        ctx.arc(pas.x, pas.y, pas.size, 0, 2 * Math.PI);
        ctx.fillStyle = pas.color;
        ctx.fill();
        pas.x -= pas.xoff;
        pas.y -= pas.yoff;
        pas.xoff -= (pas.xoff * 0.05);
        pas.yoff -= ((pas.yoff + 5) * 0.05);
        pas.size -= (pas.size * 0.05);
        if (pas.y > cheight || pas.y < -50 || pas.size <= 0) {
            pass.splice(i, 1);
            i--;
        }
    }

    requestAnimationFrame(step);
}

step();
</script>
</body>
</html>
